<ol class="breadcrumb">
  <li><a href="#settings">Settings</a></li>
  <li><a href="#connections">Connections</a></li>
  <li class="active">{{#if connection.friendly_name}}{{connection.friendly_name}}{{else}}{{connection.name}}{{/if}}</li>
</ol>

{{#if connection}}
  <form role="form" id="connection_form" class="form-horizontal">
    <div class="form-group" id="connection_name_group">
      <label class="col-sm-2 control-label" for="connection_name">Name</label>
      <div class="col-sm-8">
        <input type="text" class="form-control" id="connection_name" placeholder="{{connection.name}}" value="{{connection.friendly_name}}">
      </div>
    </div>
    <div class="form-group" id="connection_identifier_group">
      <label class="col-sm-2 control-label">Email address(es)</label>
      <div class="col-sm-8">
        {{#each connection.identifiers}}
          {{#if active}}
            <p class="form-control-static">{{identifier}}</p>
          {{else}}
            <p class="form-control-static"><s>{{identifier}}</s></p>
          {{/if}}
        {{/each}}

      </div>
    </div>
    <div class="form-group" id="connection_favorite_group">
      <label class="col-sm-2 control-label" for="connection_favorite">Favorite</label>
      <div class="col-sm-8">
        <a href="javascript:connection_submit('{{connection.id}}','favorite');"><span id="connection_favorite" class="glyphicon {{#if connection.favorite}}glyphicon-star connections_yellow{{else}}glyphicon-star-empty text-muted{{/if}} icon_size"></span></a>
        <span class="help-block">SettePad allocates as much as possible of the receivables to your starred connections. So now you can pay beer for friend A (who is a lousy debtor to you) and instead, get it back from starred friend B.</span>
      </div>
    </div>
    <div class="form-group" id="connection_limit_group">
      <label class="col-sm-2 control-label" for="connection_limit">Auto accept memos</label>
      <div class="col-sm-8" id="connection_limit">
        <div class="btn-group" data-toggle="buttons" id="auto_accept_div">
          <label class="btn btn-default {{#if auto_accept_manual}}active{{/if}}">
            <input type="radio" name="auto_accept" id="auto_accept_0" value="0" autocomplete="off" {{#if auto_accept_manual}}checked{{/if}}> Never
          </label>
          <label class="btn btn-default {{#if auto_accept_up_to_limit}}active{{/if}}">
            <input type="radio" name="auto_accept" id="auto_accept_1" value="1" autocomplete="off" {{#if auto_accept_up_to_limit}}checked{{/if}}> Up to limit
          </label>
          <label class="btn btn-default {{#if auto_accept_automatic}}active{{/if}}">
            <input type="radio" name="auto_accept" id="auto_accept_2" value="2" autocomplete="off" {{#if auto_accept_automatic}}checked{{/if}}> Always
          </label>
        </div>
        <br/><br/>
        <div id="limits_table">
          <div class="input-group bottom15" id="connection_amount_group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span id="connection_currency">{{default_currency}}</span> <span class="caret"></span></button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="javascript:connection_set_currency('USD');">USD</a></li>
                <li><a href="javascript:connection_set_currency('GBP');">GBP</a></li>
                <li><a href="javascript:connection_set_currency('EUR');">EUR</a></li>
                <li class="divider"></li>
                <li><a href="javascript:connection_show_currency_form();">Other</a></li>
              </ul>
            </span>
            <input type="text" class="form-control" id="connection_amount" placeholder="Limit">
            <span class="input-group-btn">
              <a href="javascript:void(0);" onclick="connection_submit('{{connection.id}}','limit');" class="btn btn-primary" type="button">Add</a>
            </span>
          </div>
          <div class="input-group hidden bottom15" id="connection_currency_group">
            <input type="text" class="form-control" value="{{default_currency}}" id="connection_currency_input" placeholder="Currency">
            <span class="input-group-btn">
              <a href="javascript:void(0);" onclick="connection_parse_currency();" class="btn btn-primary" type="button">Set</a>
            </span>
          </div>

          <ul class="list-group">
            {{#each connection.limits}}
              <li class="list-group-item">
                <div class="row">

                  <div class="col-xs-9">
                    {{@key}} {{this}}
                  </div>
                  <div class="col-xs-3 text-right">
                    <a href="javascript:connection_remove_limit('{{../connection.id}}','{{@key}}');"><span class="glyphicon glyphicon-remove text-muted"></span></a>
                  </div>
                </div>
              </li>
            {{/each}}
          </ul>
          <span class="help-block">SettlePad will automatically accept incoming memos until the sum of the last 24 hours crosses the specified (positive) limit.</span>
        </div>
      </div>
    </div>
  </form>

{{else}}
  <p>The contact does not exist.</p>
{{/if}}
